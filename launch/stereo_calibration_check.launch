<launch>
  
  <!--
    <arg name="bagfile"/>
    <node pkg="rxbag" type="rxbag" name="$(anon rxbag)" args="$(arg bagfile)" />
  -->
  
  <arg name="stereo" default="stereo_camera" />
  <arg name="image" default="image_rect" />
  <arg name="format" default="pgm" />

  <node pkg="camera_calibration_fixed" type="cameracheck.py" name="camera_checker" args="--size 9x6 --square=0.04" output="screen">
    <remap from="stereo" to="$(arg stereo)" />
    <remap from="image" to="$(arg image)" />
  </node>

<!--
  <node pkg="pattern_pose_estimation" type="checkerboard_detector_node" name="checkerboard_detector_left" output="screen">
    <param name="cols" value="8" />
    <param name="rows" value="6" />
    <param name="size" value="0.1075" />
    <param name="rectified" value="true" />
    <param name="show_detection" value="true" />
    <remap from="image" to="$(arg stereo)/left/$(arg image)" />
  </node>

  <node pkg="pattern_pose_estimation" type="checkerboard_detector_node" name="checkerboard_detector_right" output="screen">
    <param name="cols" value="8" />
    <param name="rows" value="6" />
    <param name="size" value="0.1075" />
    <param name="rectified" value="true" />
    <param name="show_detection" value="true" />
    <remap from="image" to="$(arg stereo)/right/$(arg image)" />
  </node>
-->
<!--
  <node name="$(arg stereo)_stereo_image_proc" type="stereo_image_proc" pkg="stereo_image_proc"
        ns="$(arg stereo)" />
-->
  <node pkg="image_view" type="image_view" name="$(arg stereo)_left_image_view" >
    <remap from="image" to="$(arg stereo)/left/$(arg image)" />
    <param name="filename_format" value="left%04i.$(arg format)"/>
  </node>

  <node pkg="image_view" type="image_view" name="$(arg stereo)_right_image_view" >
    <remap from="image" to="$(arg stereo)/right/$(arg image)" />
    <param name="filename_format" value="right%04i.$(arg format)"/>
  </node>

</launch>
